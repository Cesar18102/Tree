<!DOCTYPE HTML>

<html>
	<head>
		<meta charset="utf-8"/>
		<link rel="stylesheet" href="styles/tree_styles.css"/>
		<!--<script src="scripts/tree_builder.js"></script>-->
	</head>
	
	<body onload="init()">
		<div id="tree"></div>
	</body>
	
	<script>
	
		let person_22 = {

			 id : 22,                           //идентификатор
			 first_name : `Григорий`,                   //имя
			 christening_name : `Григорий`,             //имярек
			 last_name : null,                    //фамилия
			 birth_date : `10.10.1936`,                   //дата рождения
			 death_date : `31.12.9999`,                   //дата смерти
			 age : `83`,                          //возраст
			 birth_history : null,                //история рождения
			 death_history : null,                //история смерти
			 death_cause : null,                  //причина смерти
			 country_birh : null,                 //страна рождения
			 relocation : null,                   //смена мест проживания
			 positions_held : null,               //история трудовой деятельности
			 accidents : null,                    //история несчастных случаев
			 chronica_ilments : null,             //перечень хронических заболеваний
			 character_traits : null,             //черты характера 
			 vices : null,                        //пагубные привычки, зависимости 
			 sin : null,                          //судимости, преступления 
			 christening : `крещен`,                  //крещен ли. может принимать значения 'крещен', 'не крещен' все символы в нижнем регистре 
			 person_marks : null,                 //особые отметки на человеке 
			 ability : null,                      //таланты 
			 common : null,                       //дополнительная информация 
			 specials : [],                     //особые даты и события. может принимать значения  в виде '[дата1][описание1]|[дата2][описание2]' 
			 attitude_to_parent_1 : null,         //описание взаимоотношений данной персоны к отцу 
			 attitude_to_parent_2 : null,         //описание взаимоотношений данной персоны к матери 
			 attitude_to_me_from_parent_1 : null, //описание взаимоотношений отца к данной персоне 
			 attitude_to_me_from_parent_2 : null, //описание взаимоотношений матери к данной персоне 
			 photo_url : null,
			 sex : `man`,
			 parent1 : null,
			 parent2 : null,
			 merries : []
		};

		 
		 

		let person_21 = {

			 id : 21,                           //идентификатор
			 first_name : `Дед Литвин`,                   //имя
			 christening_name : `Дед Литвин`,             //имярек
			 last_name : null,                    //фамилия
			 birth_date : `16.05.1911`,                   //дата рождения
			 death_date : `03.01.1972`,                   //дата смерти
			 age : `61`,                          //возраст
			 birth_history : null,                //история рождения
			 death_history : null,                //история смерти
			 death_cause : null,                  //причина смерти
			 country_birh : null,                 //страна рождения
			 relocation : null,                   //смена мест проживания
			 positions_held : null,               //история трудовой деятельности
			 accidents : null,                    //история несчастных случаев
			 chronica_ilments : null,             //перечень хронических заболеваний
			 character_traits : null,             //черты характера 
			 vices : null,                        //пагубные привычки, зависимости 
			 sin : null,                          //судимости, преступления 
			 christening : `крещен`,                  //крещен ли. может принимать значения 'крещен', 'не крещен' все символы в нижнем регистре 
			 person_marks : null,                 //особые отметки на человеке 
			 ability : null,                      //таланты 
			 common : null,                       //дополнительная информация 
			 specials : [],                     //особые даты и события. может принимать значения  в виде '[дата1][описание1]|[дата2][описание2]' 
			 attitude_to_parent_1 : null,         //описание взаимоотношений данной персоны к отцу 
			 attitude_to_parent_2 : null,         //описание взаимоотношений данной персоны к матери 
			 attitude_to_me_from_parent_1 : null, //описание взаимоотношений отца к данной персоне 
			 attitude_to_me_from_parent_2 : null, //описание взаимоотношений матери к данной персоне 
			 photo_url : null,
			 sex : `man`,
			 parent1 : null,
			 parent2 : null,
			 merries : []
		};

		 
		 

		let person_25 = {

			 id : 25,                           //идентификатор
			 first_name : `Таня Литв`,                   //имя
			 christening_name : `Татьяна`,             //имярек
			 last_name : null,                    //фамилия
			 birth_date : `15.06.1983`,                   //дата рождения
			 death_date : `31.12.9999`,                   //дата смерти
			 age : `36`,                          //возраст
			 birth_history : null,                //история рождения
			 death_history : null,                //история смерти
			 death_cause : null,                  //причина смерти
			 country_birh : null,                 //страна рождения
			 relocation : null,                   //смена мест проживания
			 positions_held : null,               //история трудовой деятельности
			 accidents : null,                    //история несчастных случаев
			 chronica_ilments : null,             //перечень хронических заболеваний
			 character_traits : null,             //черты характера 
			 vices : null,                        //пагубные привычки, зависимости 
			 sin : null,                          //судимости, преступления 
			 christening : null,                  //крещен ли. может принимать значения 'крещен', 'не крещен' все символы в нижнем регистре 
			 person_marks : null,                 //особые отметки на человеке 
			 ability : null,                      //таланты 
			 common : null,                       //дополнительная информация 
			 specials : [],                     //особые даты и события. может принимать значения  в виде '[дата1][описание1]|[дата2][описание2]' 
			 attitude_to_parent_1 : null,         //описание взаимоотношений данной персоны к отцу 
			 attitude_to_parent_2 : null,         //описание взаимоотношений данной персоны к матери 
			 attitude_to_me_from_parent_1 : null, //описание взаимоотношений отца к данной персоне 
			 attitude_to_me_from_parent_2 : null, //описание взаимоотношений матери к данной персоне 
			 photo_url : null,
			 sex : `man`,
			 parent1 : null,
			 parent2 : null,
			 merries : []
		};

		 
		 

		let person_23 = {

			 id : 23,                           //идентификатор
			 first_name : `Надежда`,                   //имя
			 christening_name : `Надежда`,             //имярек
			 last_name : null,                    //фамилия
			 birth_date : `19.12.1938`,                   //дата рождения
			 death_date : `31.12.9999`,                   //дата смерти
			 age : `81`,                          //возраст
			 birth_history : null,                //история рождения
			 death_history : null,                //история смерти
			 death_cause : null,                  //причина смерти
			 country_birh : null,                 //страна рождения
			 relocation : null,                   //смена мест проживания
			 positions_held : null,               //история трудовой деятельности
			 accidents : null,                    //история несчастных случаев
			 chronica_ilments : null,             //перечень хронических заболеваний
			 character_traits : null,             //черты характера 
			 vices : null,                        //пагубные привычки, зависимости 
			 sin : null,                          //судимости, преступления 
			 christening : `крещен`,                  //крещен ли. может принимать значения 'крещен', 'не крещен' все символы в нижнем регистре 
			 person_marks : null,                 //особые отметки на человеке 
			 ability : null,                      //таланты 
			 common : null,                       //дополнительная информация 
			 specials : [],                     //особые даты и события. может принимать значения  в виде '[дата1][описание1]|[дата2][описание2]' 
			 attitude_to_parent_1 : null,         //описание взаимоотношений данной персоны к отцу 
			 attitude_to_parent_2 : null,         //описание взаимоотношений данной персоны к матери 
			 attitude_to_me_from_parent_1 : null, //описание взаимоотношений отца к данной персоне 
			 attitude_to_me_from_parent_2 : null, //описание взаимоотношений матери к данной персоне 
			 photo_url : null,
			 sex : `man`,
			 parent1 : null,
			 parent2 : null,
			 merries : []
		};

		 
		 

		let person_4 = {

			 id : 4,                           //идентификатор
			 first_name : `Михаил`,                   //имя
			 christening_name : `Міхаїл`,             //имярек
			 last_name : `Турин`,                    //фамилия
			 birth_date : `10.03.2019`,                   //дата рождения
			 death_date : `31.12.9999`,                   //дата смерти
			 age : `1`,                          //возраст
			 birth_history : null,                //история рождения
			 death_history : null,                //история смерти
			 death_cause : null,                  //причина смерти
			 country_birh : null,                 //страна рождения
			 relocation : null,                   //смена мест проживания
			 positions_held : null,               //история трудовой деятельности
			 accidents : null,                    //история несчастных случаев
			 chronica_ilments : null,             //перечень хронических заболеваний
			 character_traits : null,             //черты характера 
			 vices : null,                        //пагубные привычки, зависимости 
			 sin : null,                          //судимости, преступления 
			 christening : `крещен`,                  //крещен ли. может принимать значения 'крещен', 'не крещен' все символы в нижнем регистре 
			 person_marks : null,                 //особые отметки на человеке 
			 ability : null,                      //таланты 
			 common : null,                       //дополнительная информация 
			 specials : [],                     //особые даты и события. может принимать значения  в виде '[дата1][описание1]|[дата2][описание2]' 
			 attitude_to_parent_1 : null,         //описание взаимоотношений данной персоны к отцу 
			 attitude_to_parent_2 : null,         //описание взаимоотношений данной персоны к матери 
			 attitude_to_me_from_parent_1 : null, //описание взаимоотношений отца к данной персоне 
			 attitude_to_me_from_parent_2 : null, //описание взаимоотношений матери к данной персоне 
			 photo_url : null,
			 sex : `man`,
			 parent1 : null,
			 parent2 : null,
			 merries : []
		};

		 
		 

		let person_2 = {

			 id : 2,                           //идентификатор
			 first_name : `Дмитрий`,                   //имя
			 christening_name : `Димитрий`,             //имярек
			 last_name : `Турин`,                    //фамилия
			 birth_date : `15.04.2009`,                   //дата рождения
			 death_date : `31.12.9999`,                   //дата смерти
			 age : `10`,                          //возраст
			 birth_history : null,                //история рождения
			 death_history : null,                //история смерти
			 death_cause : null,                  //причина смерти
			 country_birh : null,                 //страна рождения
			 relocation : null,                   //смена мест проживания
			 positions_held : null,               //история трудовой деятельности
			 accidents : null,                    //история несчастных случаев
			 chronica_ilments : null,             //перечень хронических заболеваний
			 character_traits : null,             //черты характера 
			 vices : null,                        //пагубные привычки, зависимости 
			 sin : null,                          //судимости, преступления 
			 christening : `крещен`,                  //крещен ли. может принимать значения 'крещен', 'не крещен' все символы в нижнем регистре 
			 person_marks : `оккультист`,                 //особые отметки на человеке 
			 ability : null,                      //таланты 
			 common : null,                       //дополнительная информация 
			 specials : [],                     //особые даты и события. может принимать значения  в виде '[дата1][описание1]|[дата2][описание2]' 
			 attitude_to_parent_1 : null,         //описание взаимоотношений данной персоны к отцу 
			 attitude_to_parent_2 : null,         //описание взаимоотношений данной персоны к матери 
			 attitude_to_me_from_parent_1 : null, //описание взаимоотношений отца к данной персоне 
			 attitude_to_me_from_parent_2 : null, //описание взаимоотношений матери к данной персоне 
			 photo_url : null,
			 sex : `man`,
			 parent1 : null,
			 parent2 : null,
			 merries : []
		};

		 
		 

		let person_3 = {

			 id : 3,                           //идентификатор
			 first_name : `Иванна`,                   //имя
			 christening_name : `Иоанна`,             //имярек
			 last_name : `Турин`,                    //фамилия
			 birth_date : `01.09.2006`,                   //дата рождения
			 death_date : `31.12.9999`,                   //дата смерти
			 age : `13`,                          //возраст
			 birth_history : null,                //история рождения
			 death_history : null,                //история смерти
			 death_cause : null,                  //причина смерти
			 country_birh : null,                 //страна рождения
			 relocation : null,                   //смена мест проживания
			 positions_held : null,               //история трудовой деятельности
			 accidents : null,                    //история несчастных случаев
			 chronica_ilments : null,             //перечень хронических заболеваний
			 character_traits : null,             //черты характера 
			 vices : null,                        //пагубные привычки, зависимости 
			 sin : null,                          //судимости, преступления 
			 christening : `крещен`,                  //крещен ли. может принимать значения 'крещен', 'не крещен' все символы в нижнем регистре 
			 person_marks : `богоотступница|оккультистка`,                 //особые отметки на человеке 
			 ability : null,                      //таланты 
			 common : null,                       //дополнительная информация 
			 specials : [],                     //особые даты и события. может принимать значения  в виде '[дата1][описание1]|[дата2][описание2]' 
			 attitude_to_parent_1 : null,         //описание взаимоотношений данной персоны к отцу 
			 attitude_to_parent_2 : null,         //описание взаимоотношений данной персоны к матери 
			 attitude_to_me_from_parent_1 : null, //описание взаимоотношений отца к данной персоне 
			 attitude_to_me_from_parent_2 : null, //описание взаимоотношений матери к данной персоне 
			 photo_url : null,
			 sex : `woman`,
			 parent1 : null,
			 parent2 : null,
			 merries : []
		};

		 
		 

		let person_5 = {

			 id : 5,                           //идентификатор
			 first_name : `Катруша`,                   //имя
			 christening_name : `Екатерина`,             //имярек
			 last_name : `Белогородская`,                    //фамилия
			 birth_date : `16.01.1999`,                   //дата рождения
			 death_date : `31.12.9999`,                   //дата смерти
			 age : `21`,                          //возраст
			 birth_history : `<p>Рождение сложное, врач-акушер чуть не упустил младенца, протыкали копьем и наделали множественные раны в голове.</p>

		<p>C тех пор голова покрыта красными родинками-отростками, похожими на бородавки.</p>`,                //история рождения
			 death_history : null,                //история смерти
			 death_cause : null,                  //причина смерти
			 country_birh : `Украина`,                 //страна рождения
			 relocation : null,                   //смена мест проживания
			 positions_held : null,               //история трудовой деятельности
			 accidents : null,                    //история несчастных случаев
			 chronica_ilments : null,             //перечень хронических заболеваний
			 character_traits : null,             //черты характера 
			 vices : null,                        //пагубные привычки, зависимости 
			 sin : null,                          //судимости, преступления 
			 christening : `крещен`,                  //крещен ли. может принимать значения 'крещен', 'не крещен' все символы в нижнем регистре 
			 person_marks : `богоотступница|оккультистка|ведьма`,                 //особые отметки на человеке 
			 ability : `<p><strong>Интеллектуалка</strong></p>`,                      //таланты 
			 common : `Дополнительные заметки не указаны`,                       //дополнительная информация 
			 specials : [{date : `16.01.1999`, description : `событие 1`}, {date : `17.01.1999`, description : `событие 3`}, {date : `11.02.2020`, description : `событие 4`}],                     //особые даты и события. может принимать значения  в виде '[дата1][описание1]|[дата2][описание2]' 
			 attitude_to_parent_1 : null,         //описание взаимоотношений данной персоны к отцу 
			 attitude_to_parent_2 : null,         //описание взаимоотношений данной персоны к матери 
			 attitude_to_me_from_parent_1 : null, //описание взаимоотношений отца к данной персоне 
			 attitude_to_me_from_parent_2 : null, //описание взаимоотношений матери к данной персоне 
			 photo_url : null,
			 sex : `woman`,
			 parent1 : null,
			 parent2 : null,
			 merries : []
		};

		 
		 

		let person_6 = {

			 id : 6,                           //идентификатор
			 first_name : `Анна`,                   //имя
			 christening_name : `Анна`,             //имярек
			 last_name : `Петроня`,                    //фамилия
			 birth_date : `17.04.1988`,                   //дата рождения
			 death_date : `31.12.9999`,                   //дата смерти
			 age : `31`,                          //возраст
			 birth_history : null,                //история рождения
			 death_history : null,                //история смерти
			 death_cause : null,                  //причина смерти
			 country_birh : null,                 //страна рождения
			 relocation : null,                   //смена мест проживания
			 positions_held : null,               //история трудовой деятельности
			 accidents : null,                    //история несчастных случаев
			 chronica_ilments : null,             //перечень хронических заболеваний
			 character_traits : null,             //черты характера 
			 vices : null,                        //пагубные привычки, зависимости 
			 sin : null,                          //судимости, преступления 
			 christening : `крещен`,                  //крещен ли. может принимать значения 'крещен', 'не крещен' все символы в нижнем регистре 
			 person_marks : `богоотступница|оккультистка`,                 //особые отметки на человеке 
			 ability : null,                      //таланты 
			 common : null,                       //дополнительная информация 
			 specials : [],                     //особые даты и события. может принимать значения  в виде '[дата1][описание1]|[дата2][описание2]' 
			 attitude_to_parent_1 : null,         //описание взаимоотношений данной персоны к отцу 
			 attitude_to_parent_2 : null,         //описание взаимоотношений данной персоны к матери 
			 attitude_to_me_from_parent_1 : null, //описание взаимоотношений отца к данной персоне 
			 attitude_to_me_from_parent_2 : null, //описание взаимоотношений матери к данной персоне 
			 photo_url : null,
			 sex : `man`,
			 parent1 : null,
			 parent2 : null,
			 merries : []
		};

		 
		 

		let person_1 = {

			 id : 1,                           //идентификатор
			 first_name : `Александр`,                   //имя
			 christening_name : `Александр`,             //имярек
			 last_name : `Турин`,                    //фамилия
			 birth_date : `08.02.1982`,                   //дата рождения
			 death_date : `31.12.9999`,                   //дата смерти
			 age : `38`,                          //возраст
			 birth_history : null,                //история рождения
			 death_history : null,                //история смерти
			 death_cause : null,                  //причина смерти
			 country_birh : null,                 //страна рождения
			 relocation : null,                   //смена мест проживания
			 positions_held : null,               //история трудовой деятельности
			 accidents : null,                    //история несчастных случаев
			 chronica_ilments : null,             //перечень хронических заболеваний
			 character_traits : null,             //черты характера 
			 vices : null,                        //пагубные привычки, зависимости 
			 sin : null,                          //судимости, преступления 
			 christening : `крещен`,                  //крещен ли. может принимать значения 'крещен', 'не крещен' все символы в нижнем регистре 
			 person_marks : `богоотступник|сектант|оккультист`,                 //особые отметки на человеке 
			 ability : null,                      //таланты 
			 common : null,                       //дополнительная информация 
			 specials : [],                     //особые даты и события. может принимать значения  в виде '[дата1][описание1]|[дата2][описание2]' 
			 attitude_to_parent_1 : null,         //описание взаимоотношений данной персоны к отцу 
			 attitude_to_parent_2 : null,         //описание взаимоотношений данной персоны к матери 
			 attitude_to_me_from_parent_1 : null, //описание взаимоотношений отца к данной персоне 
			 attitude_to_me_from_parent_2 : null, //описание взаимоотношений матери к данной персоне 
			 photo_url : null,
			 sex : `man`,
			 parent1 : null,
			 parent2 : null,
			 merries : []
		};

		 
		 

		let person_17 = {

			 id : 17,                           //идентификатор
			 first_name : `Александр Коб`,                   //имя
			 christening_name : `Александр`,             //имярек
			 last_name : null,                    //фамилия
			 birth_date : `12.06.1965`,                   //дата рождения
			 death_date : `31.12.9999`,                   //дата смерти
			 age : `54`,                          //возраст
			 birth_history : null,                //история рождения
			 death_history : null,                //история смерти
			 death_cause : null,                  //причина смерти
			 country_birh : null,                 //страна рождения
			 relocation : null,                   //смена мест проживания
			 positions_held : null,               //история трудовой деятельности
			 accidents : null,                    //история несчастных случаев
			 chronica_ilments : null,             //перечень хронических заболеваний
			 character_traits : null,             //черты характера 
			 vices : null,                        //пагубные привычки, зависимости 
			 sin : null,                          //судимости, преступления 
			 christening : `крещен`,                  //крещен ли. может принимать значения 'крещен', 'не крещен' все символы в нижнем регистре 
			 person_marks : null,                 //особые отметки на человеке 
			 ability : null,                      //таланты 
			 common : null,                       //дополнительная информация 
			 specials : [],                     //особые даты и события. может принимать значения  в виде '[дата1][описание1]|[дата2][описание2]' 
			 attitude_to_parent_1 : null,         //описание взаимоотношений данной персоны к отцу 
			 attitude_to_parent_2 : null,         //описание взаимоотношений данной персоны к матери 
			 attitude_to_me_from_parent_1 : null, //описание взаимоотношений отца к данной персоне 
			 attitude_to_me_from_parent_2 : null, //описание взаимоотношений матери к данной персоне 
			 photo_url : null,
			 sex : `man`,
			 parent1 : null,
			 parent2 : null,
			 merries : []
		};

		 
		 

		let person_18 = {

			 id : 18,                           //идентификатор
			 first_name : `Ирина Бел`,                   //имя
			 christening_name : `Ирина`,             //имярек
			 last_name : null,                    //фамилия
			 birth_date : `11.03.1965`,                   //дата рождения
			 death_date : `31.12.9999`,                   //дата смерти
			 age : `55`,                          //возраст
			 birth_history : null,                //история рождения
			 death_history : null,                //история смерти
			 death_cause : null,                  //причина смерти
			 country_birh : null,                 //страна рождения
			 relocation : null,                   //смена мест проживания
			 positions_held : null,               //история трудовой деятельности
			 accidents : null,                    //история несчастных случаев
			 chronica_ilments : null,             //перечень хронических заболеваний
			 character_traits : null,             //черты характера 
			 vices : null,                        //пагубные привычки, зависимости 
			 sin : null,                          //судимости, преступления 
			 christening : `крещен`,                  //крещен ли. может принимать значения 'крещен', 'не крещен' все символы в нижнем регистре 
			 person_marks : null,                 //особые отметки на человеке 
			 ability : null,                      //таланты 
			 common : null,                       //дополнительная информация 
			 specials : [],                     //особые даты и события. может принимать значения  в виде '[дата1][описание1]|[дата2][описание2]' 
			 attitude_to_parent_1 : null,         //описание взаимоотношений данной персоны к отцу 
			 attitude_to_parent_2 : null,         //описание взаимоотношений данной персоны к матери 
			 attitude_to_me_from_parent_1 : null, //описание взаимоотношений отца к данной персоне 
			 attitude_to_me_from_parent_2 : null, //описание взаимоотношений матери к данной персоне 
			 photo_url : null,
			 sex : `man`,
			 parent1 : null,
			 parent2 : null,
			 merries : []
		};

		 
		 

		let person_19 = {

			 id : 19,                           //идентификатор
			 first_name : `Николай б`,                   //имя
			 christening_name : `Никоалй`,             //имярек
			 last_name : null,                    //фамилия
			 birth_date : `24.10.1960`,                   //дата рождения
			 death_date : `31.12.9999`,                   //дата смерти
			 age : `59`,                          //возраст
			 birth_history : null,                //история рождения
			 death_history : null,                //история смерти
			 death_cause : null,                  //причина смерти
			 country_birh : null,                 //страна рождения
			 relocation : null,                   //смена мест проживания
			 positions_held : null,               //история трудовой деятельности
			 accidents : null,                    //история несчастных случаев
			 chronica_ilments : null,             //перечень хронических заболеваний
			 character_traits : null,             //черты характера 
			 vices : null,                        //пагубные привычки, зависимости 
			 sin : null,                          //судимости, преступления 
			 christening : `крещен`,                  //крещен ли. может принимать значения 'крещен', 'не крещен' все символы в нижнем регистре 
			 person_marks : null,                 //особые отметки на человеке 
			 ability : null,                      //таланты 
			 common : null,                       //дополнительная информация 
			 specials : [],                     //особые даты и события. может принимать значения  в виде '[дата1][описание1]|[дата2][описание2]' 
			 attitude_to_parent_1 : null,         //описание взаимоотношений данной персоны к отцу 
			 attitude_to_parent_2 : null,         //описание взаимоотношений данной персоны к матери 
			 attitude_to_me_from_parent_1 : null, //описание взаимоотношений отца к данной персоне 
			 attitude_to_me_from_parent_2 : null, //описание взаимоотношений матери к данной персоне 
			 photo_url : null,
			 sex : `man`,
			 parent1 : null,
			 parent2 : null,
			 merries : []
		};

		 
		 

		let person_20 = {

			 id : 20,                           //идентификатор
			 first_name : `Георгий Бел`,                   //имя
			 christening_name : `Георгий`,             //имярек
			 last_name : null,                    //фамилия
			 birth_date : `19.02.1960`,                   //дата рождения
			 death_date : `31.12.9999`,                   //дата смерти
			 age : `60`,                          //возраст
			 birth_history : null,                //история рождения
			 death_history : null,                //история смерти
			 death_cause : null,                  //причина смерти
			 country_birh : null,                 //страна рождения
			 relocation : null,                   //смена мест проживания
			 positions_held : null,               //история трудовой деятельности
			 accidents : null,                    //история несчастных случаев
			 chronica_ilments : null,             //перечень хронических заболеваний
			 character_traits : null,             //черты характера 
			 vices : null,                        //пагубные привычки, зависимости 
			 sin : null,                          //судимости, преступления 
			 christening : null,                  //крещен ли. может принимать значения 'крещен', 'не крещен' все символы в нижнем регистре 
			 person_marks : null,                 //особые отметки на человеке 
			 ability : null,                      //таланты 
			 common : null,                       //дополнительная информация 
			 specials : [],                     //особые даты и события. может принимать значения  в виде '[дата1][описание1]|[дата2][описание2]' 
			 attitude_to_parent_1 : null,         //описание взаимоотношений данной персоны к отцу 
			 attitude_to_parent_2 : null,         //описание взаимоотношений данной персоны к матери 
			 attitude_to_me_from_parent_1 : null, //описание взаимоотношений отца к данной персоне 
			 attitude_to_me_from_parent_2 : null, //описание взаимоотношений матери к данной персоне 
			 photo_url : null,
			 sex : `man`,
			 parent1 : null,
			 parent2 : null,
			 merries : []
		};

		 
		 

		let person_8 = {

			 id : 8,                           //идентификатор
			 first_name : `Любовь`,                   //имя
			 christening_name : `Любовь`,             //имярек
			 last_name : null,                    //фамилия
			 birth_date : `10.04.1958`,                   //дата рождения
			 death_date : `31.12.9999`,                   //дата смерти
			 age : `61`,                          //возраст
			 birth_history : null,                //история рождения
			 death_history : null,                //история смерти
			 death_cause : null,                  //причина смерти
			 country_birh : null,                 //страна рождения
			 relocation : null,                   //смена мест проживания
			 positions_held : null,               //история трудовой деятельности
			 accidents : null,                    //история несчастных случаев
			 chronica_ilments : null,             //перечень хронических заболеваний
			 character_traits : null,             //черты характера 
			 vices : null,                        //пагубные привычки, зависимости 
			 sin : null,                          //судимости, преступления 
			 christening : `крещен`,                  //крещен ли. может принимать значения 'крещен', 'не крещен' все символы в нижнем регистре 
			 person_marks : null,                 //особые отметки на человеке 
			 ability : null,                      //таланты 
			 common : null,                       //дополнительная информация 
			 specials : [],                     //особые даты и события. может принимать значения  в виде '[дата1][описание1]|[дата2][описание2]' 
			 attitude_to_parent_1 : null,         //описание взаимоотношений данной персоны к отцу 
			 attitude_to_parent_2 : null,         //описание взаимоотношений данной персоны к матери 
			 attitude_to_me_from_parent_1 : null, //описание взаимоотношений отца к данной персоне 
			 attitude_to_me_from_parent_2 : null, //описание взаимоотношений матери к данной персоне 
			 photo_url : null,
			 sex : `man`,
			 parent1 : null,
			 parent2 : null,
			 merries : []
		};

		 
		 

		let person_7 = {

			 id : 7,                           //идентификатор
			 first_name : `Сергей`,                   //имя
			 christening_name : `Сергий`,             //имярек
			 last_name : null,                    //фамилия
			 birth_date : `07.05.1957`,                   //дата рождения
			 death_date : `31.12.9999`,                   //дата смерти
			 age : `62`,                          //возраст
			 birth_history : null,                //история рождения
			 death_history : null,                //история смерти
			 death_cause : null,                  //причина смерти
			 country_birh : null,                 //страна рождения
			 relocation : null,                   //смена мест проживания
			 positions_held : null,               //история трудовой деятельности
			 accidents : null,                    //история несчастных случаев
			 chronica_ilments : null,             //перечень хронических заболеваний
			 character_traits : null,             //черты характера 
			 vices : null,                        //пагубные привычки, зависимости 
			 sin : null,                          //судимости, преступления 
			 christening : `крещен`,                  //крещен ли. может принимать значения 'крещен', 'не крещен' все символы в нижнем регистре 
			 person_marks : null,                 //особые отметки на человеке 
			 ability : null,                      //таланты 
			 common : null,                       //дополнительная информация 
			 specials : [],                     //особые даты и события. может принимать значения  в виде '[дата1][описание1]|[дата2][описание2]' 
			 attitude_to_parent_1 : null,         //описание взаимоотношений данной персоны к отцу 
			 attitude_to_parent_2 : null,         //описание взаимоотношений данной персоны к матери 
			 attitude_to_me_from_parent_1 : null, //описание взаимоотношений отца к данной персоне 
			 attitude_to_me_from_parent_2 : null, //описание взаимоотношений матери к данной персоне 
			 photo_url : null,
			 sex : `man`,
			 parent1 : null,
			 parent2 : null,
			 merries : []
		};

		 
		 

		let person_16 = {

			 id : 16,                           //идентификатор
			 first_name : `Вера`,                   //имя
			 christening_name : `Вера`,             //имярек
			 last_name : null,                    //фамилия
			 birth_date : `10.10.1956`,                   //дата рождения
			 death_date : `31.12.9999`,                   //дата смерти
			 age : `63`,                          //возраст
			 birth_history : null,                //история рождения
			 death_history : null,                //история смерти
			 death_cause : null,                  //причина смерти
			 country_birh : null,                 //страна рождения
			 relocation : null,                   //смена мест проживания
			 positions_held : null,               //история трудовой деятельности
			 accidents : null,                    //история несчастных случаев
			 chronica_ilments : null,             //перечень хронических заболеваний
			 character_traits : null,             //черты характера 
			 vices : null,                        //пагубные привычки, зависимости 
			 sin : null,                          //судимости, преступления 
			 christening : `крещен`,                  //крещен ли. может принимать значения 'крещен', 'не крещен' все символы в нижнем регистре 
			 person_marks : null,                 //особые отметки на человеке 
			 ability : null,                      //таланты 
			 common : null,                       //дополнительная информация 
			 specials : [],                     //особые даты и события. может принимать значения  в виде '[дата1][описание1]|[дата2][описание2]' 
			 attitude_to_parent_1 : null,         //описание взаимоотношений данной персоны к отцу 
			 attitude_to_parent_2 : null,         //описание взаимоотношений данной персоны к матери 
			 attitude_to_me_from_parent_1 : null, //описание взаимоотношений отца к данной персоне 
			 attitude_to_me_from_parent_2 : null, //описание взаимоотношений матери к данной персоне 
			 photo_url : null,
			 sex : `man`,
			 parent1 : null,
			 parent2 : null,
			 merries : []
		};
		 

		let person_13 = {

			 id : 13,                           //идентификатор
			 first_name : `Анфиса`,                   //имя
			 christening_name : `Анфиса`,             //имярек
			 last_name : null,                    //фамилия
			 birth_date : `25.12.1934`,                   //дата рождения
			 death_date : `19.05.2008`,                   //дата смерти
			 age : `74`,                          //возраст
			 birth_history : null,                //история рождения
			 death_history : null,                //история смерти
			 death_cause : null,                  //причина смерти
			 country_birh : null,                 //страна рождения
			 relocation : null,                   //смена мест проживания
			 positions_held : null,               //история трудовой деятельности
			 accidents : null,                    //история несчастных случаев
			 chronica_ilments : null,             //перечень хронических заболеваний
			 character_traits : null,             //черты характера 
			 vices : null,                        //пагубные привычки, зависимости 
			 sin : null,                          //судимости, преступления 
			 christening : `крещен`,                  //крещен ли. может принимать значения 'крещен', 'не крещен' все символы в нижнем регистре 
			 person_marks : null,                 //особые отметки на человеке 
			 ability : null,                      //таланты 
			 common : null,                       //дополнительная информация 
			 specials : [],                     //особые даты и события. может принимать значения  в виде '[дата1][описание1]|[дата2][описание2]' 
			 attitude_to_parent_1 : null,         //описание взаимоотношений данной персоны к отцу 
			 attitude_to_parent_2 : null,         //описание взаимоотношений данной персоны к матери 
			 attitude_to_me_from_parent_1 : null, //описание взаимоотношений отца к данной персоне 
			 attitude_to_me_from_parent_2 : null, //описание взаимоотношений матери к данной персоне 
			 photo_url : null,
			 sex : `man`,
			 parent1 : null,
			 parent2 : null,
			 merries : []
		};

		 
		 

		let person_9 = {

			 id : 9,                           //идентификатор
			 first_name : `Валентина`,                   //имя
			 christening_name : `Валентина`,             //имярек
			 last_name : null,                    //фамилия
			 birth_date : `17.09.1933`,                   //дата рождения
			 death_date : `31.12.9999`,                   //дата смерти
			 age : `86`,                          //возраст
			 birth_history : null,                //история рождения
			 death_history : null,                //история смерти
			 death_cause : null,                  //причина смерти
			 country_birh : null,                 //страна рождения
			 relocation : null,                   //смена мест проживания
			 positions_held : null,               //история трудовой деятельности
			 accidents : null,                    //история несчастных случаев
			 chronica_ilments : null,             //перечень хронических заболеваний
			 character_traits : null,             //черты характера 
			 vices : null,                        //пагубные привычки, зависимости 
			 sin : null,                          //судимости, преступления 
			 christening : `крещен`,                  //крещен ли. может принимать значения 'крещен', 'не крещен' все символы в нижнем регистре 
			 person_marks : null,                 //особые отметки на человеке 
			 ability : null,                      //таланты 
			 common : null,                       //дополнительная информация 
			 specials : [],                     //особые даты и события. может принимать значения  в виде '[дата1][описание1]|[дата2][описание2]' 
			 attitude_to_parent_1 : null,         //описание взаимоотношений данной персоны к отцу 
			 attitude_to_parent_2 : null,         //описание взаимоотношений данной персоны к матери 
			 attitude_to_me_from_parent_1 : null, //описание взаимоотношений отца к данной персоне 
			 attitude_to_me_from_parent_2 : null, //описание взаимоотношений матери к данной персоне 
			 photo_url : null,
			 sex : `man`,
			 parent1 : null,
			 parent2 : null,
			 merries : []
		};

		 
		 

		let person_10 = {

			 id : 10,                           //идентификатор
			 first_name : `Василий`,                   //имя
			 christening_name : `Василий`,             //имярек
			 last_name : null,                    //фамилия
			 birth_date : `01.01.1933`,                   //дата рождения
			 death_date : `16.09.1979`,                   //дата смерти
			 age : `46`,                          //возраст
			 birth_history : null,                //история рождения
			 death_history : `<p>Пришел домой после бани, где выпивали, сколько не известно. Дома прилег подремать. Во сне умер.</p>`,                //история смерти
			 death_cause : `Инсульт`,                  //причина смерти
			 country_birh : null,                 //страна рождения
			 relocation : null,                   //смена мест проживания
			 positions_held : null,               //история трудовой деятельности
			 accidents : null,                    //история несчастных случаев
			 chronica_ilments : null,             //перечень хронических заболеваний
			 character_traits : null,             //черты характера 
			 vices : null,                        //пагубные привычки, зависимости 
			 sin : null,                          //судимости, преступления 
			 christening : null,                  //крещен ли. может принимать значения 'крещен', 'не крещен' все символы в нижнем регистре 
			 person_marks : null,                 //особые отметки на человеке 
			 ability : null,                      //таланты 
			 common : null,                       //дополнительная информация 
			 specials : [],                     //особые даты и события. может принимать значения  в виде '[дата1][описание1]|[дата2][описание2]' 
			 attitude_to_parent_1 : null,         //описание взаимоотношений данной персоны к отцу 
			 attitude_to_parent_2 : null,         //описание взаимоотношений данной персоны к матери 
			 attitude_to_me_from_parent_1 : null, //описание взаимоотношений отца к данной персоне 
			 attitude_to_me_from_parent_2 : null, //описание взаимоотношений матери к данной персоне 
			 photo_url : null,
			 sex : `man`,
			 parent1 : null,
			 parent2 : null,
			 merries : []
		};

		 
		 

		let person_15 = {

			 id : 15,                           //идентификатор
			 first_name : `Сергей Коб`,                   //имя
			 christening_name : `Сергий`,             //имярек
			 last_name : null,                    //фамилия
			 birth_date : `24.06.1932`,                   //дата рождения
			 death_date : `11.07.1995`,                   //дата смерти
			 age : `63`,                          //возраст
			 birth_history : null,                //история рождения
			 death_history : null,                //история смерти
			 death_cause : null,                  //причина смерти
			 country_birh : null,                 //страна рождения
			 relocation : null,                   //смена мест проживания
			 positions_held : null,               //история трудовой деятельности
			 accidents : null,                    //история несчастных случаев
			 chronica_ilments : null,             //перечень хронических заболеваний
			 character_traits : null,             //черты характера 
			 vices : null,                        //пагубные привычки, зависимости 
			 sin : null,                          //судимости, преступления 
			 christening : `крещен`,                  //крещен ли. может принимать значения 'крещен', 'не крещен' все символы в нижнем регистре 
			 person_marks : null,                 //особые отметки на человеке 
			 ability : null,                      //таланты 
			 common : null,                       //дополнительная информация 
			 specials : [],                     //особые даты и события. может принимать значения  в виде '[дата1][описание1]|[дата2][описание2]' 
			 attitude_to_parent_1 : null,         //описание взаимоотношений данной персоны к отцу 
			 attitude_to_parent_2 : null,         //описание взаимоотношений данной персоны к матери 
			 attitude_to_me_from_parent_1 : null, //описание взаимоотношений отца к данной персоне 
			 attitude_to_me_from_parent_2 : null, //описание взаимоотношений матери к данной персоне 
			 photo_url : null,
			 sex : `man`,
			 parent1 : null,
			 parent2 : null,
			 merries : []
		};

		 
		 

		let person_26 = {

			 id : 26,                           //идентификатор
			 first_name : `Валентина Гавриловна`,                   //имя
			 christening_name : null,             //имярек
			 last_name : null,                    //фамилия
			 birth_date : null,                   //дата рождения
			 death_date : null,                   //дата смерти
			 age : `0`,                          //возраст
			 birth_history : null,                //история рождения
			 death_history : null,                //история смерти
			 death_cause : null,                  //причина смерти
			 country_birh : null,                 //страна рождения
			 relocation : null,                   //смена мест проживания
			 positions_held : null,               //история трудовой деятельности
			 accidents : null,                    //история несчастных случаев
			 chronica_ilments : null,             //перечень хронических заболеваний
			 character_traits : null,             //черты характера 
			 vices : null,                        //пагубные привычки, зависимости 
			 sin : null,                          //судимости, преступления 
			 christening : null,                  //крещен ли. может принимать значения 'крещен', 'не крещен' все символы в нижнем регистре 
			 person_marks : null,                 //особые отметки на человеке 
			 ability : null,                      //таланты 
			 common : null,                       //дополнительная информация 
			 specials : [],                     //особые даты и события. может принимать значения  в виде '[дата1][описание1]|[дата2][описание2]' 
			 attitude_to_parent_1 : null,         //описание взаимоотношений данной персоны к отцу 
			 attitude_to_parent_2 : null,         //описание взаимоотношений данной персоны к матери 
			 attitude_to_me_from_parent_1 : null, //описание взаимоотношений отца к данной персоне 
			 attitude_to_me_from_parent_2 : null, //описание взаимоотношений матери к данной персоне 
			 photo_url : null,
			 sex : `man`,
			 parent1 : null,
			 parent2 : null,
			 merries : []
		};

		 
		 

		let person_27 = {

			 id : 27,                           //идентификатор
			 first_name : `Юрий Муж Гавриловны`,                   //имя
			 christening_name : null,             //имярек
			 last_name : null,                    //фамилия
			 birth_date : null,                   //дата рождения
			 death_date : null,                   //дата смерти
			 age : `0`,                          //возраст
			 birth_history : null,                //история рождения
			 death_history : null,                //история смерти
			 death_cause : null,                  //причина смерти
			 country_birh : null,                 //страна рождения
			 relocation : null,                   //смена мест проживания
			 positions_held : null,               //история трудовой деятельности
			 accidents : null,                    //история несчастных случаев
			 chronica_ilments : null,             //перечень хронических заболеваний
			 character_traits : null,             //черты характера 
			 vices : null,                        //пагубные привычки, зависимости 
			 sin : null,                          //судимости, преступления 
			 christening : null,                  //крещен ли. может принимать значения 'крещен', 'не крещен' все символы в нижнем регистре 
			 person_marks : null,                 //особые отметки на человеке 
			 ability : null,                      //таланты 
			 common : null,                       //дополнительная информация 
			 specials : [],                     //особые даты и события. может принимать значения  в виде '[дата1][описание1]|[дата2][описание2]' 
			 attitude_to_parent_1 : null,         //описание взаимоотношений данной персоны к отцу 
			 attitude_to_parent_2 : null,         //описание взаимоотношений данной персоны к матери 
			 attitude_to_me_from_parent_1 : null, //описание взаимоотношений отца к данной персоне 
			 attitude_to_me_from_parent_2 : null, //описание взаимоотношений матери к данной персоне 
			 photo_url : null,
			 sex : `man`,
			 parent1 : null,
			 parent2 : null,
			 merries : []
		};

		 
		 

		let person_12 = {

			 id : 12,                           //идентификатор
			 first_name : `Ольга`,                   //имя
			 christening_name : `Ольга`,             //имярек
			 last_name : null,                    //фамилия
			 birth_date : `23.03.1915`,                   //дата рождения
			 death_date : `07.04.1996`,                   //дата смерти
			 age : `81`,                          //возраст
			 birth_history : null,                //история рождения
			 death_history : null,                //история смерти
			 death_cause : null,                  //причина смерти
			 country_birh : null,                 //страна рождения
			 relocation : null,                   //смена мест проживания
			 positions_held : null,               //история трудовой деятельности
			 accidents : null,                    //история несчастных случаев
			 chronica_ilments : null,             //перечень хронических заболеваний
			 character_traits : null,             //черты характера 
			 vices : null,                        //пагубные привычки, зависимости 
			 sin : null,                          //судимости, преступления 
			 christening : `крещен`,                  //крещен ли. может принимать значения 'крещен', 'не крещен' все символы в нижнем регистре 
			 person_marks : null,                 //особые отметки на человеке 
			 ability : null,                      //таланты 
			 common : null,                       //дополнительная информация 
			 specials : [],                     //особые даты и события. может принимать значения  в виде '[дата1][описание1]|[дата2][описание2]' 
			 attitude_to_parent_1 : null,         //описание взаимоотношений данной персоны к отцу 
			 attitude_to_parent_2 : null,         //описание взаимоотношений данной персоны к матери 
			 attitude_to_me_from_parent_1 : null, //описание взаимоотношений отца к данной персоне 
			 attitude_to_me_from_parent_2 : null, //описание взаимоотношений матери к данной персоне 
			 photo_url : null,
			 sex : `man`,
			 parent1 : null,
			 parent2 : null,
			 merries : []
		};

		 
		 

		let person_11 = {

			 id : 11,                           //идентификатор
			 first_name : `Николай`,                   //имя
			 christening_name : `Николай`,             //имярек
			 last_name : null,                    //фамилия
			 birth_date : `17.09.1914`,                   //дата рождения
			 death_date : `18.09.1986`,                   //дата смерти
			 age : `72`,                          //возраст
			 birth_history : null,                //история рождения
			 death_history : null,                //история смерти
			 death_cause : `Просто умер`,                  //причина смерти
			 country_birh : null,                 //страна рождения
			 relocation : null,                   //смена мест проживания
			 positions_held : null,               //история трудовой деятельности
			 accidents : null,                    //история несчастных случаев
			 chronica_ilments : null,             //перечень хронических заболеваний
			 character_traits : null,             //черты характера 
			 vices : null,                        //пагубные привычки, зависимости 
			 sin : null,                          //судимости, преступления 
			 christening : `крещен`,                  //крещен ли. может принимать значения 'крещен', 'не крещен' все символы в нижнем регистре 
			 person_marks : null,                 //особые отметки на человеке 
			 ability : null,                      //таланты 
			 common : null,                       //дополнительная информация 
			 specials : [],                     //особые даты и события. может принимать значения  в виде '[дата1][описание1]|[дата2][описание2]' 
			 attitude_to_parent_1 : null,         //описание взаимоотношений данной персоны к отцу 
			 attitude_to_parent_2 : null,         //описание взаимоотношений данной персоны к матери 
			 attitude_to_me_from_parent_1 : null, //описание взаимоотношений отца к данной персоне 
			 attitude_to_me_from_parent_2 : null, //описание взаимоотношений матери к данной персоне 
			 photo_url : null,
			 sex : `man`,
			 parent1 : null,
			 parent2 : null,
			 merries : []
		};

		 
		 

		let person_24 = {

			 id : 24,                           //идентификатор
			 first_name : `Дуня`,                   //имя
			 christening_name : `Анастасия`,             //имярек
			 last_name : null,                    //фамилия
			 birth_date : `15.10.1906`,                   //дата рождения
			 death_date : `03.08.1970`,                   //дата смерти
			 age : `64`,                          //возраст
			 birth_history : null,                //история рождения
			 death_history : null,                //история смерти
			 death_cause : null,                  //причина смерти
			 country_birh : null,                 //страна рождения
			 relocation : null,                   //смена мест проживания
			 positions_held : null,               //история трудовой деятельности
			 accidents : null,                    //история несчастных случаев
			 chronica_ilments : null,             //перечень хронических заболеваний
			 character_traits : null,             //черты характера 
			 vices : null,                        //пагубные привычки, зависимости 
			 sin : null,                          //судимости, преступления 
			 christening : null,                  //крещен ли. может принимать значения 'крещен', 'не крещен' все символы в нижнем регистре 
			 person_marks : null,                 //особые отметки на человеке 
			 ability : null,                      //таланты 
			 common : null,                       //дополнительная информация 
			 specials : [],                     //особые даты и события. может принимать значения  в виде '[дата1][описание1]|[дата2][описание2]' 
			 attitude_to_parent_1 : null,         //описание взаимоотношений данной персоны к отцу 
			 attitude_to_parent_2 : null,         //описание взаимоотношений данной персоны к матери 
			 attitude_to_me_from_parent_1 : null, //описание взаимоотношений отца к данной персоне 
			 attitude_to_me_from_parent_2 : null, //описание взаимоотношений матери к данной персоне 
			 photo_url : null,
			 sex : `man`,
			 parent1 : null,
			 parent2 : null,
			 merries : []
		};

		 
		 

		let person_14 = {

			 id : 14,                           //идентификатор
			 first_name : `Кузьма`,                   //имя
			 christening_name : `Кузьма`,             //имярек
			 last_name : null,                    //фамилия
			 birth_date : `21.10.1905`,                   //дата рождения
			 death_date : `21.10.1943`,                   //дата смерти
			 age : `38`,                          //возраст
			 birth_history : null,                //история рождения
			 death_history : null,                //история смерти
			 death_cause : null,                  //причина смерти
			 country_birh : null,                 //страна рождения
			 relocation : null,                   //смена мест проживания
			 positions_held : null,               //история трудовой деятельности
			 accidents : null,                    //история несчастных случаев
			 chronica_ilments : null,             //перечень хронических заболеваний
			 character_traits : null,             //черты характера 
			 vices : null,                        //пагубные привычки, зависимости 
			 sin : null,                          //судимости, преступления 
			 christening : `крещен`,                  //крещен ли. может принимать значения 'крещен', 'не крещен' все символы в нижнем регистре 
			 person_marks : null,                 //особые отметки на человеке 
			 ability : null,                      //таланты 
			 common : null,                       //дополнительная информация 
			 specials : [],                     //особые даты и события. может принимать значения  в виде '[дата1][описание1]|[дата2][описание2]' 
			 attitude_to_parent_1 : null,         //описание взаимоотношений данной персоны к отцу 
			 attitude_to_parent_2 : null,         //описание взаимоотношений данной персоны к матери 
			 attitude_to_me_from_parent_1 : null, //описание взаимоотношений отца к данной персоне 
			 attitude_to_me_from_parent_2 : null, //описание взаимоотношений матери к данной персоне 
			 photo_url : null,
			 sex : `man`,
			 parent1 : null,
			 parent2 : null,
			 merries : []
		};

		let ROOT_PERSON = person_14;

		 
		 function parent() {



			 person_4.parent1 = person_1;

			 person_4.parent2 = person_5;



			 person_2.parent1 = person_1;

			 person_2.parent2 = person_6;



			 person_3.parent1 = person_1;

			 person_3.parent2 = person_6;



			 person_5.parent1 = person_20;

			 person_5.parent2 = person_18;



			 person_6.parent1 = null;

			 person_6.parent2 = null;



			 person_25.parent1 = person_22;

			 person_25.parent2 = null;



			 person_1.parent1 = person_7;

			 person_1.parent2 = person_8;



			 person_17.parent1 = person_15;

			 person_17.parent2 = person_13;



			 person_18.parent1 = person_27;

			 person_18.parent2 = person_26;



			 person_19.parent1 = person_10;

			 person_19.parent2 = person_9;



			 person_20.parent1 = null;

			 person_20.parent2 = null;



			 person_8.parent1 = person_15;

			 person_8.parent2 = person_13;



			 person_7.parent1 = person_10;

			 person_7.parent2 = person_9;



			 person_16.parent1 = person_15;

			 person_16.parent2 = person_13;


			 person_23.parent1 = person_21;

			 person_23.parent2 = person_12;



			 person_22.parent1 = person_21;

			 person_22.parent2 = person_12;



			 person_13.parent1 = person_14;

			 person_13.parent2 = person_24;



			 person_9.parent1 = person_11;

			 person_9.parent2 = person_12;



			 person_10.parent1 = null;

			 person_10.parent2 = null;



			 person_15.parent1 = null;

			 person_15.parent2 = null;



			 person_12.parent1 = null;

			 person_12.parent2 = null;



			 person_11.parent1 = null;

			 person_11.parent2 = null;



			 person_21.parent1 = null;

			 person_21.parent2 = null;



			 person_24.parent1 = null;

			 person_24.parent2 = null;



			 person_14.parent1 = null;

			 person_14.parent2 = null;



			 person_26.parent1 = null;

			 person_26.parent2 = null;



			 person_27.parent1 = null;

			 person_27.parent2 = null;

		 }





		 function letpeople() {

			 let people = [ 

				 person_4,

				 person_2,

				 person_3,

				 person_5,

				 person_6,

				 person_25,

				 person_1,

				 person_17,

				 person_18,

				 person_19,

				 person_20,

				 person_8,

				 person_7,

				 person_16,
				 

				 person_23,

				 person_22,

				 person_13,

				 person_9,

				 person_10,

				 person_15,

				 person_12,

				 person_11,

				 person_21,

				 person_24,

				 person_14,

				 person_26,

				 person_27

				 ];

				 return people;

		 }



		 function pushmerries() {

			 person_5.merries.push(

				 {

				 id : 6,

				 couple : person_1,

				 merry_date : `18.08.2018`,

				 divorce_date : null,

				 venchan_li_brak : null,

				 fiktivnyj_brak : 0, //если фиктивный брак, то ставим 1

				 children : [

					 person_4

					 ]

				 }
			 );

			 person_6.merries.push(

				 {

				 id : 2,

				 couple : person_1,

				 merry_date : `25.07.2006`,

				 divorce_date : `28.02.2017`,

				 venchan_li_brak : null,

				 fiktivnyj_brak : 0, //если фиктивный брак, то ставим 1

				 children : [

					 person_2,

					 person_3

					 ]

				 }

				 , null
			 );

			 person_1.merries.push(

				 {

				 id : 2,

				 couple : person_6,

				 merry_date : `25.07.2006`,

				 divorce_date : `28.02.2017`,

				 venchan_li_brak : null,

				 fiktivnyj_brak : 0, //если фиктивный брак, то ставим 1

				 children : [

					 person_2,

					 person_3

					 ]

				 },

				 {

				 id : 6,

				 couple : person_5,

				 merry_date : `18.08.2018`,

				 divorce_date : null,

				 venchan_li_brak : null,

				 fiktivnyj_brak : 0, //если фиктивный брак, то ставим 1

				 children : [

					 person_4

					 ]

				 }
			 );

			 person_18.merries.push(

				 {

				 id : 12,

				 couple : person_20,

				 merry_date : `07.04.1997`,

				 divorce_date : `21.08.2013`,

				 venchan_li_brak : null,

				 fiktivnyj_brak : 0, //если фиктивный брак, то ставим 1

				 children : [

					 person_5

					 ]

				 }

				 , null
			 );

			 person_20.merries.push(

				 {

				 id : 12,

				 couple : person_18,

				 merry_date : `07.04.1997`,

				 divorce_date : `21.08.2013`,

				 venchan_li_brak : null,

				 fiktivnyj_brak : 0, //если фиктивный брак, то ставим 1

				 children : [

					 person_5

					 ]

				 }

				 , null
			 );

			 person_8.merries.push(

				 {

				 id : 7,

				 couple : person_7,

				 merry_date : `07.03.1981`,

				 divorce_date : null,

				 venchan_li_brak : null,

				 fiktivnyj_brak : 0, //если фиктивный брак, то ставим 1

				 children : [

					 person_1

					 ]

				 }
			 );

			 person_7.merries.push(

				 {

				 id : 7,

				 couple : person_8,

				 merry_date : `07.03.1981`,

				 divorce_date : null,

				 venchan_li_brak : null,

				 fiktivnyj_brak : 0, //если фиктивный брак, то ставим 1

				 children : [

					 person_1

					 ]

				 }
			 );

			 person_22.merries.push(

				 {

				 id : -2601753,

				 couple : null,

				 merry_date : null,

				 divorce_date : null,

				 venchan_li_brak : null,

				 fiktivnyj_brak : 1, //если фиктивный брак, то ставим 1

				 children : [

					 person_25

					 ]

				 }
			 );

			 person_13.merries.push(

				 {

				 id : 11,

				 couple : person_15,

				 merry_date : `18.07.1953`,

				 divorce_date : `28.10.1974`,

				 venchan_li_brak : null,

				 fiktivnyj_brak : 0, //если фиктивный брак, то ставим 1

				 children : [

					 person_17,

					 person_8,

					 person_16,
					 

					 ]

				 }

				 , null
			 );

			 person_9.merries.push(

				 {

				 id : 8,

				 couple : person_10,

				 merry_date : `01.01.1956`,

				 divorce_date : null,

				 venchan_li_brak : null,

				 fiktivnyj_brak : 0, //если фиктивный брак, то ставим 1

				 children : [

					 person_19,

					 person_7

					 ]

				 }
			 );

			 person_10.merries.push(

				 {

				 id : 8,

				 couple : person_9,

				 merry_date : `01.01.1956`,

				 divorce_date : null,

				 venchan_li_brak : null,

				 fiktivnyj_brak : 0, //если фиктивный брак, то ставим 1

				 children : [

					 person_19,

					 person_7

					 ]

				 }
			 );

			 person_15.merries.push(

				 {

				 id : 11,

				 couple : person_13,

				 merry_date : `18.07.1953`,

				 divorce_date : `28.10.1974`,

				 venchan_li_brak : null,

				 fiktivnyj_brak : 0, //если фиктивный брак, то ставим 1

				 children : [

					 person_17,

					 person_8,

					 person_16,
					 

					 ]

				 }

				 , null
			 );

			 person_12.merries.push(

				 {

				 id : 10,

				 couple : person_11,

				 merry_date : `11.02.1933`,

				 divorce_date : `27.06.1934`,

				 venchan_li_brak : null,

				 fiktivnyj_brak : 0, //если фиктивный брак, то ставим 1

				 children : [

					 person_9

					 ]

				 },

				 {

				 id : 9,

				 couple : person_21,

				 merry_date : `07.08.1936`,

				 divorce_date : null,

				 venchan_li_brak : null,

				 fiktivnyj_brak : 0, //если фиктивный брак, то ставим 1

				 children : [

					 person_23,

					 person_22

					 ]

				 }
			 );

			 person_11.merries.push(

				 {

				 id : 10,

				 couple : person_12,

				 merry_date : `11.02.1933`,

				 divorce_date : `27.06.1934`,

				 venchan_li_brak : null,

				 fiktivnyj_brak : 0, //если фиктивный брак, то ставим 1

				 children : [

					 person_9

					 ]

				 }

				 , null
			 );

			 person_21.merries.push(

				 {

				 id : 9,

				 couple : person_12,

				 merry_date : `07.08.1936`,

				 divorce_date : null,

				 venchan_li_brak : null,

				 fiktivnyj_brak : 0, //если фиктивный брак, то ставим 1

				 children : [

					 person_23,

					 person_22

					 ]

				 }
			 );

			 person_24.merries.push(

				 {

				 id : -2601753,

				 couple : person_14,

				 merry_date : null,

				 divorce_date : null,

				 venchan_li_brak : null,

				 fiktivnyj_brak : 1, //если фиктивный брак, то ставим 1

				 children : [

					 person_13

					 ]

				 }
			 );

			 person_14.merries.push(

				 {

				 id : -2601753,

				 couple : person_24,

				 merry_date : null,

				 divorce_date : null,

				 venchan_li_brak : null,

				 fiktivnyj_brak : 1, //если фиктивный брак, то ставим 1

				 children : [

					 person_13

					 ]

				 }
			 );

			 person_26.merries.push(

				 {

				 id : -2601753,

				 couple : person_27,

				 merry_date : null,

				 divorce_date : null,

				 venchan_li_brak : null,

				 fiktivnyj_brak : 1, //если фиктивный брак, то ставим 1

				 children : [

					 person_18

					 ]

				 }
			 );

			 person_27.merries.push(

				 {

				 id : -2601753,

				 couple : person_26,

				 merry_date : null,

				 divorce_date : null,

				 venchan_li_brak : null,

				 fiktivnyj_brak : 1, //если фиктивный брак, то ставим 1

				 children : [

					 person_18

					 ]

				 }
			 );

		}

		const horisontalSpace = 6;  //расстояние между людьми по горизонтали
		const verticalSpace = 6;     //расстояние между людьми по вертикали
			
		const horisontalIndent = 12; //отступ дерева от левого края
		const verticalIndent = 0;    //отступ дерева от верхнего края
			
		const personHeight = 8;		 //высота болка человека (должна соответствовать .person.height в tree_styles.css!!! и сумме .person-photo.width + .person-info.width + .person-buttons.width + 1(for borders))
		const personWidth = 36;		 //ширина болка человека (должна соответствовать .person.width в tree_styles.css!!!)
		const personBorder = 0.2;	 //толщина границы блока человека
			
		const merrySymbolWidth = 2;	 	  			//ширина символа брака(кольца)
		const merrySymbolHeight = 1.3333; 			//высота символа брака(кольца)
		const lineStrength = 0.1;		  			//толщина линий родства
		const parentToChildLineHorisontalShift = 1; //отступ от центра предка при проведении линии к потомку

		const defaultLineColor = "#A0A0A0";
		const selectedLineColor = "black";

		const defaultLineZindex = 1;
		const selectedLineZindex = 999;

		let personButtons = {
			mainInfoButton : 0,
			parentsButton : 1,
			brothersSistersButton : 2,
			merriesButton : 3
		};

		function init() {
			
			pushmerries();//Добавить браки
			parent();//Добавить предков
			let people = letpeople();//Cписок всх людей
			
			people.sort((a, b) => Math.random() > 0.5 ? 1 : -1); //рандомная сортировка - для проверки на баги в правильной сортировки людей
			
			let sizes = getTreeSize(ROOT_PERSON, people);
			let sortedPeople = sortPeople(sizes);
			
			let tree = document.getElementById("tree");	
			let selectedPerson = null;
			
			locatePersonViews(sortedPeople, (e) => {
				if(selectedPerson != null)
					applyToParentLines(
						selectedPerson, 
						line => { //изменение стилей линий при отмене выделения поддерева
							line.style.backgroundColor = defaultLineColor;
							line.style.zIndex = defaultLineZindex;
						},
						parentView => { //изменение стилей блоков персон при отмене выделения поддерева
							parentView.style.borderColor = defaultLineColor;
						}
					);
				
				applyToParentLines(
					e.person, 
					line => { //изменение стилей линий при выделении поддерева
						line.style.backgroundColor = selectedLineColor;
						line.style.zIndex = selectedLineZindex;
					}, 
					parentView => { //изменение стилей блоков персон при выделении поддерева
						parentView.style.borderColor = selectedLineColor;
					}
				);
				selectedPerson = e.person;
				
				let event = document.createEvent('Event');
				event.person = e.person;
				event.initEvent('personSelected', true, true);
				tree.dispatchEvent(event);
			}, (e) => {
				let event = document.createEvent('Event');
				event.clickedButton = e;
				event.personButtons = personButtons;
				event.initEvent('personButtonClicked', true, true);
				tree.dispatchEvent(event);
			}, tree);
			
			createAllMerryLines(people, personWidth, personHeight, merrySymbolWidth, merrySymbolHeight, personBorder, tree);
			createAllChildLines(people, personWidth, personHeight, personBorder, parentToChildLineHorisontalShift, lineStrength, tree);
		}

		function applyToParentLines(person, lineHandler, parentViewHandler) {
			if(person == null || person == undefined || person.view == null || person.view == undefined)
			   return;
		   
			parentViewHandler(person.view);	
			
			if(person.view.parentLines == null || person.view.parentLines == undefined)
				return;
			
			person.view.parentLines.forEach(line => lineHandler(line));
			applyToParentLines(person.parent1, lineHandler, parentViewHandler);
			applyToParentLines(person.parent2, lineHandler, parentViewHandler);
		}

		function sortPeople(treeSizes) {
			let levelsSorted = [];
			for(let i = 0; i < treeSizes.levels.length; i++) {
				let level = [];
				let totalSize = (treeSizes.maxWidth - treeSizes.levels[i].length) / 2;
				while(treeSizes.levels[i].filter(person => !person.in_group).length != 0) {
					let group = getNextGroup(treeSizes.levels[i]);
					group.leftPosition = totalSize;
					for(let pers of group)
						pers.leftPosition = totalSize++;
					level.push(group);
				}
				
				level.forEach(group => sortGroup(group));
				
				for(let k = 0; k < level.length - 1; k++) {
					for(let j = 0; j < level.length - 1; j++) {
						let distanceCurrent = getAvgGroupDistanceToParents(level[j]);
						let distanceOther = getAvgGroupDistanceToParents(level[j + 1]);
							
						swapGroupsPositions(level[j], level[j + 1]);
							
						let temp = level[j];
						level[j] = level[j + 1];
						level[j + 1] = temp;
							
						sortGroup(level[j]);
						sortGroup(level[j + 1]);
						
						let distanceProbe = getAvgGroupDistanceToParents(level[j]);
						let distanceOtherProbe = getAvgGroupDistanceToParents(level[j + 1]);
						
						if(distanceProbe + distanceOtherProbe > distanceCurrent + distanceOther) {
							swapGroupsPositions(level[j], level[j + 1]);
							
							let temp = level[j];
							level[j] = level[j + 1];
							level[j + 1] = temp;
							
							sortGroup(level[j]);
							sortGroup(level[j + 1]);
						}
						
					}
				}
				
				levelsSorted[i] = level;
			}
			
			return {
				maxHeight : treeSizes.maxHeight,
				maxWidth : treeSizes.maxWidth,
				levels : levelsSorted.map(levelSorted => levelSorted.reduce((people, group) => people.concat(group), []))
			};
		}

		function swapGroupsPositions(group1, group2) {
			let leftGroup = group1.leftPosition < group2.leftPosition ? group1 : group2;
			let rightGroup = group1.leftPosition < group2.leftPosition ? group2 : group1;
			
			for(let pers of leftGroup)
				pers.leftPosition = pers.leftPosition + rightGroup.length;
							
			for(let pers of rightGroup)
				pers.leftPosition = pers.leftPosition - leftGroup.length;
							
			rightGroup.leftPosition -= leftGroup.length;
			leftGroup.leftPosition += rightGroup.length;
		}

		function sortGroup(group) {
			let change = true;
			while(change) {
				change = false;
				for(let i = 0; i < group.length; i++) {
					for(let j = i + 1; j < group.length; j++) {
						let distanceCurrent = getAvgDistanceToParents(group[i]);
						let distanceMerryCurrent = getSumDistanceToMerries(group[i]) * 10;
						
						let distanceOther = getAvgDistanceToParents(group[j]);
						let distanceMerryOther = getSumDistanceToMerries(group[j]) * 10;
						
						
						let temp = group[i];
						let tempLeftPosition = group[i].leftPosition;
							
						group[i].leftPosition = group[j].leftPosition;
						group[i] = group[j];
								
						group[j].leftPosition = tempLeftPosition;
						group[j] = temp;
						
						
						let distanceCurrentProbe = getAvgDistanceToParents(group[i]);
						let distanceMerryCurrentProbe = getSumDistanceToMerries(group[i]) * 10;
						
						let distanceOtherProbe = getAvgDistanceToParents(group[j]);
						let distanceMerryOtherProbe = getSumDistanceToMerries(group[j]) * 10;
						
						let probeSum = distanceCurrentProbe + distanceMerryCurrentProbe + 
									   distanceOtherProbe + distanceMerryOtherProbe;
									   
						let sum = distanceCurrent + distanceMerryCurrent + 
								  distanceOther + distanceMerryOther;
						
						change = probeSum < sum;
						
						if(!change) {
							temp = group[i];
							tempLeftPosition = group[i].leftPosition;
							
							group[i].leftPosition = group[j].leftPosition;
							group[i] = group[j];
								
							group[j].leftPosition = tempLeftPosition;
							group[j] = temp;
						}
					}
				}
			}
		}

		function getDefinedParents(person) {
			return [person.parent1, person.parent2].filter(parent => parent != null && parent != undefined);
		}

		function getAvgGroupDistanceToParents(group) {
			return group.reduce((acc, pers) => acc + getAvgDistanceToParents(pers), 0);
		}

		function getAvgDistanceToParentsProbe(person, probePosition) {
			let parents = getDefinedParents(person);
			
			if(parents.length == 0)
				return 0;
			
			return parents.reduce((acc, parent) => acc + Math.abs(parent.leftPosition - probePosition), 0);
		}

		function getAvgDistanceToParents(person) {
			return getAvgDistanceToParentsProbe(person, person.leftPosition);
		}

		function getSumDistanceToMerriesProbe(person, probePosition) {
			return person.merries.reduce(
				(acc, merry) => acc + (merry == null || merry.couple == null ? 0 : Math.abs(Math.abs(merry.couple.leftPosition - probePosition) - 1)), 0
			);
		}

		function getSumDistanceToMerries(person) {
			return getSumDistanceToMerriesProbe(person, person.leftPosition);
		}

		function getPersonChildrenCount(person) {
			return person.merries.reduce((acc, merry) => acc + (merry == null ? 0 : merry.children.length), 0);
		}

		function getNextGroup(levelPeople) {
			let mostChildedPerson = levelPeople.filter(person => !person.in_group).reduce(
				(acc, person) => getPersonChildrenCount(acc) > getPersonChildrenCount(person) ? acc : person
			);
			
			return getPersonCoupleGroup(mostChildedPerson, levelPeople);
		}

		function hasCommonParent(p1, p2) {
			return (p1.parent1 != undefined && p1.parent1 != null && p2.parent1 != undefined && p2.parent1 != null && p1.parent1.id == p2.parent1.id) || 
				   (p1.parent1 != undefined && p1.parent1 != null && p2.parent2 != undefined && p2.parent2 != null && p1.parent1.id == p2.parent2.id) || 
				   (p1.parent2 != undefined && p1.parent2 != null && p2.parent1 != undefined && p2.parent1 != null && p1.parent2.id == p2.parent1.id) || 
				   (p1.parent2 != undefined && p1.parent2 != null && p2.parent2 != undefined && p2.parent2 != null && p1.parent2.id == p2.parent2.id);
		}

		function getPersonCoupleGroup(person, levelPeople) {
			let group = [person];
			person.in_group = true;
			
			let brotherSisterCouple = levelPeople.filter(pers => !pers.in_group && hasCommonParent(person, pers));
			let merryCouple = person.merries.filter(merry => merry != null && merry.couple != null && !merry.couple.in_group)
											.sort((merry, other) => other.children.length - merry.children.length - 1)
											.map(merry => merry.couple);
			
			let brothersSistersClear = brotherSisterCouple.filter(pers => merryCouple.find(p => p.id == pers.id) == undefined);
			let allNested = merryCouple;//.concat(brothersSistersClear);
			
			allNested.forEach(pers => pers.in_group = true);
			
			allNested.forEach(pers => {
				let nestedPeople = getPersonCoupleGroup(pers, levelPeople);
				if(group.length % 2 == 0) {
					for(let nestedPerson of nestedPeople)
						group.unshift(nestedPerson);
				}
				else {
					for(let nestedPerson of nestedPeople)
						group.push(nestedPerson);
				}
			});
			
			return group;
		}

		function createAllChildLines(people, personWidth, personHeight, personBorder, parentToChildLineHorisontalShift, lineStrength, tree) {
			for(let person of people) {
				for(let i = 0; i < person.merries.length; i++) {
					if(person.merries[i] == null || person.merries[i] == undefined || 
					   person.merries[i].children_built || person.merries[i].children.length == 0)
						continue;
					
					let parentViews = [person, person.merries[i].couple].filter(parent => parent != null && parent != undefined)
																		.map(parent => parent.view);
					createChildLines(
						parentViews, 
						person.merries[i].children.map(child => child.view), 
						personWidth, personHeight, personBorder, 
						parentToChildLineHorisontalShift, lineStrength, tree
					);
					
					person.merries[i].children_built = true;
					
					if(person.merries[i].couple != null)
						person.merries[i].couple.merries.find(m => m.id == person.merries[i].id).children_built = true;
				}
			}
		}

		function createAllMerryLines(people, personWidth, personHeight, merrySymbolWidth, merrySymbolHeight, personBorder, tree) {
			for(let person of people) {
				for(let i = 0; i < person.merries.length; i++) {
					let displayMerryLine = person.merries[i] != null && person.merries[i] != undefined && person.merries[i].couple != null && 
										   person.merries[i].fiktivnyj_brak == 0 && !person.merries[i].merry_built;
										   
					if(!displayMerryLine)
						continue;
					
					createMerryLine(
						person.view, person.merries[i].couple.view, 
						personWidth, personHeight, merrySymbolWidth, merrySymbolHeight, 
						i != person.merries.length - 1, personBorder, tree
					);
					
					person.merries[i].merry_built = true;
					person.merries[i].couple.merries.find(m => m.id == person.merries[i].id).merry_built = true;
				}
			}
		}

		function locatePersonViews(treeSizes, viewClickHandler, buttonsClickHandler, parent) {
			let maxWidth = (personWidth + horisontalSpace) * treeSizes.maxWidth - horisontalSpace;
			
			for(let i = 0; i < treeSizes.levels.length; i++) {
				let wIndent = (maxWidth - treeSizes.levels[i].length * (personWidth + horisontalSpace) - horisontalSpace) / 2;
				for(let j = 0; j < treeSizes.levels[i].length; j++) {
					let person = treeSizes.levels[i][j];
					let personView = createPersonView(person, buttonsClickHandler);
					
					personView.style.top = ((treeSizes.levels.length - i) * (personHeight + verticalSpace) + verticalIndent) + "em";
					personView.style.left = (j * (personWidth + horisontalSpace) + wIndent + horisontalIndent) + "em";
					
					personView.onclick = (e) => { 
						e.person = person;
						viewClickHandler(e);
					}
					
					parent.appendChild(personView);
				}
			}
		}

		function createChildLines(parents, children, personWidth, personHeight, personBorder, middleShift, lineStrength, tree) {
			if(parents.length == 0 || children.length == 0)
				return;
			
			let lines = [];
			
			let relyParent = parents[0];
			let relyChild = children[0];
			
			let relyTop = parseInt(relyChild.style.top.replace("em", "")) + personHeight;
			let relyBottom = parseInt(relyParent.style.top.replace("em", ""));
			
			let hDistance = relyTop - relyBottom;
			let hDistanceFourth = hDistance / 4;
			
			let childrenMiddles = children.map(child => {
				return {
					child : child,
					middle : parseInt(child.style.left.replace("em", "")) + personWidth / 2
				}
			});
			
			let minMiddleChild = Math.min(...childrenMiddles.map(c => c.middle));
			let maxMiddleChild = Math.max(...childrenMiddles.map(c => c.middle));
			let childrenMiddleOfMiddle = minMiddleChild + (maxMiddleChild - minMiddleChild) / 2;
			
			let tempParentMiddles = parents.map(parent => parseInt(parent.style.left.replace("em", "")) + personWidth / 2);
			let tempMinMiddle = Math.min(...tempParentMiddles);
			let tempMaxMiddle = Math.max(...tempParentMiddles);
			let tempMiddleOfMiddle = tempMinMiddle + (parents.length == 2 ? (tempMaxMiddle - tempMinMiddle) / 2 : (tempMinMiddle > childrenMiddleOfMiddle ? -1 : 1));
			
			let parentMiddles = tempParentMiddles.map(middle => middle + (middle >= tempMiddleOfMiddle ? -middleShift : middleShift));
			let minMiddle = Math.min(...parentMiddles);
			let maxMiddle = Math.max(...parentMiddles);
			let middleOfMiddle = minMiddle + (maxMiddle - minMiddle) / 2;
			
			parentMiddles.forEach(middle => lines.push(createLine(middle, relyBottom + hDistanceFourth, middle, relyBottom, "v-line", tree, "em")));
			lines.push(createLine(minMiddle, relyBottom + hDistanceFourth, maxMiddle, relyBottom + hDistanceFourth, "h-line", tree, "em"));
			
			if(Math.abs(childrenMiddleOfMiddle - middleOfMiddle) < personWidth / 4)
				lines.push(createLine(
					middleOfMiddle, children.length == 1 ? relyTop + personBorder : relyTop - hDistanceFourth, 
					middleOfMiddle, relyBottom + hDistanceFourth, "v-line", tree, "em"
				));
			else {
				let hStart = Math.min(middleOfMiddle, childrenMiddleOfMiddle);
				let hEnd = Math.max(middleOfMiddle, childrenMiddleOfMiddle) + lineStrength;
				
				lines.push(createLine(middleOfMiddle, relyBottom + hDistanceFourth * 2, middleOfMiddle, relyBottom + hDistanceFourth, "v-line", tree, "em"));
				lines.push(createLine(hStart, relyBottom + hDistanceFourth * 2, hEnd, relyBottom + hDistanceFourth * 2, "h-line", tree, "em"));
				lines.push(createLine(childrenMiddleOfMiddle, relyBottom + hDistanceFourth * 3, childrenMiddleOfMiddle, relyBottom + hDistanceFourth * 2, "v-line", tree, "em"));
			}
			
			children.forEach(child => child.parentLines = lines.slice());
			
			if(children != 1) {
				childrenMiddles.forEach(c => c.child.parentLines.push(createLine(Math.min(c.middle, childrenMiddleOfMiddle), relyTop - hDistanceFourth, Math.max(c.middle, childrenMiddleOfMiddle), relyTop - hDistanceFourth, "h-line", tree, "em")));
				childrenMiddles.forEach(c => c.child.parentLines.push(createLine(c.middle, relyTop + personBorder, c.middle, relyTop + lineStrength - hDistanceFourth, "v-line", tree, "em")));
			}
		}

		function createMerryLine(from, to, personWidth, personHeight, symbolWidth, symbolHeight, isEx, middleShift, tree) {
			let merrySymbol = createElement("div", [ isEx ? "ex-merry-symbol" : "merry-symbol" ], null, null, null, tree);
			
			let fromLeft = parseInt(from.style.left.replace("em", ""));
			let toLeft = parseInt(to.style.left.replace("em", ""));
			let top = parseInt(from.style.top.replace("em", ""));
			
			let left = Math.min(fromLeft + personWidth, toLeft + personWidth);
			let right = Math.max(fromLeft, toLeft);
			let distance = right - left;
			
			let width = (distance - symbolWidth) / 2;
			let lineTop = top + personHeight / 2;
			
			merrySymbol.style.width = symbolWidth + "em";
			merrySymbol.style.height = symbolHeight + "em";
			
			merrySymbol.style.left = (left + width) + "em";
			merrySymbol.style.top = (lineTop - symbolHeight / 2) + "em";
			
			createLine(left, lineTop, left + width, lineTop, "h-line", tree, "em");
			createLine(left + width + symbolWidth, lineTop, left + 2 * width + symbolWidth, lineTop, "h-line", tree, "em");
		}

		function createLine(xStart, yStart, xEnd, yEnd, style, parent, unit) {
			let line = createElement("div", [ style ], null, null, null, parent);
			
			let left = Math.min(xStart, xEnd);
			let right = Math.max(xStart, xEnd);
			let width = right - left;
			
			let top = Math.min(yStart, yEnd);
			let bottom = Math.max(yStart, yEnd);
			let height = bottom - top;
			
			line.style.left = left + unit;
			line.style.top = top + unit;
			
			if(width != 0)
				line.style.width = width + unit;
			
			if(height != 0)
				line.style.height = height + unit;
			
			return line;
		}

		function getTreeSize(rootPerson, allPeople) {
			markLevels(rootPerson, 0, []);
			
			let widths = [];
			for(let person of allPeople) {
				if(widths[person.height] == undefined)
					widths[person.height] = [];
				widths[person.height].push(person);
			}
			
			let heights = allPeople.map(person => person.height);
			
			return { 
				maxHeight : Math.max(...heights) - Math.min(...heights) + 1, 
				maxWidth : Math.max(...widths.map(level => level.length)),
				levels : widths
			};
		}

		function markLevels(person, height, ignore) {
			if(person == null || ignore.indexOf(person) != -1)
				return;
			
			ignore.push(person);
			person.height = height;
			
			markLevels(person.parent1, height - 1, ignore);
			markLevels(person.parent2, height - 1, ignore);
			
			for(let merry of person.merries) {
				if(merry == null)
					continue;
				
				for(let child of merry.children)
					markLevels(child, height + 1, ignore);
				
				markLevels(merry.couple, height, ignore);
			}
		}

		function createElement(tag, styles, id, attrs, textContent, parent) {
			let elem = document.createElement(tag);
			
			if(styles != null)
				for(let style of styles)
					elem.classList.add(style);
			
			if(id != null)
				elem.id = id;
			
			if(attrs != null)
				for(let key in attrs)
					elem.setAttribute(key, attrs[key]);
				
			if(textContent != null)
				elem.textContent = textContent;
			
			if(parent != null)
				parent.appendChild(elem);
			
			return elem;
		}

		function createLineSeparator(parent) {
			let row = createElement("tr", null, null, null, null, parent);
			let cell = createElement("td", null, null, null, null, row);
			let separator = createElement("div", [ "horisontal-person-info-separator" ], null, null, null, cell);
		}

		function getAgeString(age) {
			let mod = age % 10;
			
			if(mod == 1 && age != 11) return age + ' год';
			else if(mod >= 2 && mod <= 4 && (age <= 4 || age > 14)) return age + ' года';
			else return age + ' лет';
		}

		function getChristening(person) {
			if(person.christening == null || person.christening == undefined)
				return "Неизвестно, крещен" + (person.sex == "woman" ? "а" : "") + " ли";
			
			let christ = person.christening.indexOf("не") == -1;
			return (christ ? "Крещен" : "НЕ крещен") + (person.sex == "woman" ? "а" : "");
		}

		function getSexString(sex) {
			if(sex == "woman")
				return "Женский";
			else if(sex == "man")
				return "Мужской";
			else if(sex == null || sex == undefined)
				return "Неизвестен";
			else
				return sex;
		}

		function createPersonView(person, buttonsClickHandler) {
			
			let tableWrapper = createElement("table", [ "person" ], "person_" + person.id, { cellpadding : 0, cellspacing : 0 }, null, null);
			let tableWrapperRow = createElement("tr", null, null, null, null, tableWrapper);
			
			let personPhotoCell = createElement("td", null, null, null, null, tableWrapperRow);
			let personPhotoUrl = person.photo_url == null || person.photo_url == undefined ? ('./imgs/default-' + person.sex + '.png') : person.photo_url;
			let personPhoto = createElement("div", [ "person-photo" ], null, { style : "background-image : url(" + personPhotoUrl + ")" }, null, personPhotoCell);
			
			let personInfoCell = createElement("td", null, null, null, null, tableWrapperRow);
			let personInfoTable = createElement("table", [ "person-info" ], null, { cellpadding : 0, cellspacing : 0 }, null, personInfoCell);
			
			let personNamesRow = createElement("tr", null, null, null, null, personInfoTable);
			let personNamesCell = createElement("td", null, null, null, null, personNamesRow);
			let personNamesCenter = createElement("center", [ "person-names" ], null, null, null, personNamesCell);
			
			createElement("div", [ "person-first-name" ], null, null, person.first_name + "\u00A0",  personNamesCenter);
			
			if(person.christening_name != null && person.christening_name != undefined)
				createElement("div", [ "person-christening-name" ], null, null, "(" + person.christening_name + ")\u00A0",  personNamesCenter);
			
			createElement("div", [ "person-last-name" ], null, null, person.last_name, personNamesCenter);
			
			createLineSeparator(personInfoTable);
			
			let personDatesRow = createElement("tr", null, null, null, null, personInfoTable);
			let personDatesCell = createElement("td", null, null, null, null, personDatesRow);
			let personDatesCenter = createElement("center", [ "person-dates" ], null, null, null, personDatesCell);
			
			createElement("div", [ "person-birth-date" ], null, null, person.birth_date, personDatesCenter);
			
			if(person.death_date != null && person.death_date != undefined)
				createElement("div", [ "person-death-date" ], null, null, ' — ' + person.death_date, personDatesCenter);

			createElement("div", [ "person-age" ], null, null, ' (' + getAgeString(parseInt(person.age)) + ')', personDatesCenter);	
			
			createLineSeparator(personInfoTable);
			
			let personAdditionalRow = createElement("tr", null, null, null, null, personInfoTable);
			let personAdditionalCell = createElement("td", null, null, null, null, personAdditionalRow);
			let personAdditionalCenter = createElement("center", null, null, null, null, personAdditionalCell);	
			
			createElement("div", [ "person-sex" ], null, null, "Пол: " + getSexString(person.sex), personAdditionalCenter);	
			createElement("div", [ "person-christening" ], null, null, getChristening(person), personAdditionalCenter);	
			
			let personButtonsCell = createElement("td", null, null, null, null, tableWrapperRow);
			let personButtonsTable = createElement("table", [ "person-buttons" ], null, { cellpadding : 0, cellspacing : 0 }, null, personButtonsCell);
			
			let personButtonsRow1 = createElement("tr", null, null, null, null, personButtonsTable);
			let personButtonsRow2 = createElement("tr", null, null, null, null, personButtonsTable);
			let personButtonsRow3 = createElement("tr", null, null, null, null, personButtonsTable);
			let personButtonsRow4 = createElement("tr", null, null, null, null, personButtonsTable);
			
			let personButtonsCell1 = createElement("td", null, null, { valign : "middle" }, null, personButtonsRow1);
			let personButtonsCell2 = createElement("td", null, null, null, null, personButtonsRow2);
			let personButtonsCell3 = createElement("td", null, null, null, null, personButtonsRow3);
			let personButtonsCell4 = createElement("td", null, null, null, null, personButtonsRow4);
			
			let mainInfoButton = createElement("div", [ "person-button", "top-person-button", "main-info-button" ], null, null, null, personButtonsCell1);
			let parentsButton = createElement("div", [ "person-button", "parents-button" ], null, null, null, personButtonsCell2);
			let brothersSistersButton = createElement("div", [ "person-button", "brothers-sisters-button" ], null, null, null, personButtonsCell3);
			let merriesButton = createElement("div", [ "person-button", "bottom-person-button", "merries-button" ], null, null, null, personButtonsCell4);
			
			mainInfoButton.onclick = () => buttonsClickHandler(personButtons.mainInfoButton);
			parentsButton.onclick = () => buttonsClickHandler(personButtons.parentsButton);
			brothersSistersButton.onclick = () => buttonsClickHandler(personButtons.brothersSistersButton);
			merriesButton.onclick = () => buttonsClickHandler(personButtons.merriesButton);
			
			person.view = tableWrapper;
			return tableWrapper;
		}
	
	</script>
	
</html>